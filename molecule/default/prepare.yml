---
- name: Ensure apt cache are updated
  apt:
    update_cache: true
    cache_valid_time: 3600
  when: ansible_os_family == "Debian"

- name: Ensure unnecessary dependencies are removed
  package:
    name: curl-minimal
    state: absent

- name: Ensure dependencies are installed
  block:
    - name: Ensure iproute is installed
      package:
        name: iproute
        state: present
    - name: Gather ansible_default_ipv4 variable
      setup:
  when: ansible_os_family == "RedHat"
